!function(e){function t(t){for(var n,o,l=t[0],s=t[1],c=t[2],f=0,v=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&v.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);v.length;)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t,a=[],n=r[e];if(0!==n)if(n)a.push(n[2]);else{var i=new Promise((function(t,a){n=r[e]=[t,a]}));a.push(n[2]=i);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=o.p+"js/"+({about:"about"}[t=e]||t)+"."+{about:"05b50c0a"}[t]+".js";var c=new Error;l=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,a[1](c)}r[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(a)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([0,"chunk-vendors"]),a()}({0:function(e,t,a){e.exports=a("cd49")},"0d4c":function(e,t,a){},2001:function(e,t,a){},"21bb":function(e,t,a){"use strict";var n=a("2dad");a.n(n).a},"2dad":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var n=a("9c0c");a.n(n).a},"910d":function(e,t,a){"use strict";var n=a("2001");a.n(n).a},"9c0c":function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r,i=a("2b0e"),o=(a("5c0b"),a("2877")),l=Object(o.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)}),[],!1,null,null,null).exports,s=(a("d3b7"),a("8c4f")),c=(a("b0c0"),a("d4ec")),u=a("bee2"),f=a("99de"),v=a("7e84"),h=a("262e"),d=a("9ab4"),p=a("60a3"),m=a("bc3a"),b=a.n(m),g=["(255, 255, 255)","(0, 171, 255)","(255, 171, 0)","(0, 255, 171) "],j={},k=8,y=15,O=30,w=30,_=800,x=800;function C(){r.globalAlpha=1,r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,_,x),r.globalAlpha=1;for(var e=0;e<y;e++)for(var t=0;t<k;t++){var a=e*(w+1),n=t*(O+1);r.fillStyle="rgb"+g[j[e][t]],r.fillRect(n,a,O,w)}}var S=function(){function e(){var t=this;Object(c.a)(this,e),this.proc=function(e){if(null!=n){var a,r,i=(a=e,r=n.getBoundingClientRect(),{x:a.clientX-r.left,y:a.clientY-r.top}),o=i.x,l=i.y,s=Math.floor(o/(O+1)),c=Math.floor(l/(w+1));if(!(y<=c||k<=s)&&0!=j[c][s]){var u=t.deleteblock({i:c,j:s},j[c][s],1);t.score+=(u*u+u)/2,C(),function(){for(var e=!0;e;){e=!1;for(var t=y-1;0<t;t--)for(var a=0;a<k;a++)0==j[t][a]&&0!=j[t-1][a]&&(j[t][a]=j[t-1][a],e=!(j[t-1][a]=0))}}(),t.newBlocks(),C()}}},this.score=0,this.gameOver=!1,this.handleInit=!1,this.gameOverCallback=null}return Object(u.a)(e,[{key:"newBlocks",value:function(){var e,t,a=0,n=0;for(a=0;a<y;a++)for(n=0;n<k;n++){if(0==a){if(0!=j[a][n])return this.gameOver=!0,void(null!=this.gameOverCallback&&this.gameOverCallback())}else j[a-1][n]=j[a][n];a==y-1&&(j[a][n]=(e=1,t=3,Math.floor(Math.random()*(t-e+1))+e))}}},{key:"deleteblock",value:function(e,t,a){var n=1,r={i:0,j:0};return(j[e.i][e.j]=0)!=e.i&&j[e.i-1][e.j]==t&&(r.i=e.i-1,r.j=e.j,n+=this.deleteblock(r,t,a+1)),e.j!=k-1&&j[e.i][e.j+1]==t&&(r.i=e.i,r.j=e.j+1,n+=this.deleteblock(r,t,a+1)),e.i!=y-1&&j[e.i+1][e.j]==t&&(r.i=e.i+1,r.j=e.j,n+=this.deleteblock(r,t,a+1)),0!=e.j&&j[e.i][e.j-1]==t&&(r.i=e.i,r.j=e.j-1,n+=this.deleteblock(r,t,a+1)),n}},{key:"initMAP",value:function(){if(null!=(n=document.getElementById("cvs"))){for(var e=0;e<y;e++){void 0===j[e]&&(j[e]={});for(var t=0;t<k;t++)j[e][t]=0}if(0==this.handleInit){if(r=n.getContext("2d"),null==n)return;n.addEventListener("click",this.proc),r.globalAlpha=.2,r.fillStyle="rgb(0, 171, 255)",r.fillRect(0,0,_,x),r.globalAlpha=1,this.handleInit=!0}this.newBlocks()}}},{key:"startGame",value:function(){this.initMAP(),this.score=0,this.gameOver=!1,C()}}]),e}(),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).apply(this,arguments))).game=new S,e.gameStart=!1,e.name="",e.RankList=[],e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"mounted",value:function(){this.game.startGame(),this.game.gameOverCallback=this.gameOverCallback}},{key:"gameOverCallback",value:function(){var e=this;this.RankList=[],b.a.post("/api/poptilerank",{UserName:this.name,Score:this.game.score,TouchCount:0,CheckSumSha256:""}).then((function(t){e.RankList=t.data.RankList}))}},{key:"startBtnHandle",value:function(){0<this.name.length&&(this.gameStart=!0)}},{key:"retryGame",value:function(){this.game.startGame()}}]),t}(p.b),P=R=Object(d.a)([p.a],R),E=(a("910d"),Object(o.a)(P,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"poptile"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.gameStart,expression:"!gameStart"}]},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),a("p"),a("input",{staticClass:"btn btn-outline-primary",attrs:{type:"button",value:"start"},on:{click:e.startBtnHandle}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gameStart,expression:"gameStart"}]},[a("h2",[e._v(" ["+e._s(e.name)+"] SCORE : "+e._s(e.game.score))]),e.game.gameOver?a("div",[a("h1",[e._v(" GAME OVER ")]),a("h1",{staticClass:"retry",on:{click:e.retryGame}},[e._v(" RETRY? ")]),e._v(" "),a("br")]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.game.gameOver,expression:"!game.gameOver"}]},[a("canvas",{attrs:{id:"cvs",width:"245px",height:"460px"}})])]),e.game.gameOver?a("hr"):e._e(),e.game.gameOver&&0<e.RankList.length?a("div",e._l(e.RankList,(function(t){return a("p",{key:t.UserName},[e._v(" "+e._s(t.UserName)+" : "+e._s(t.Score)+" ")])})),0):e._e()])}),[],!1,null,"736a32af",null).exports),H=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).apply(this,arguments))).showHint=!1,e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"toggle",value:function(){this.showHint=!this.showHint}}]),t}(p.b),M=H=Object(d.a)([p.a],H),A=(a("dd79"),{name:"Home",components:{Poptile:E,Help:Object(o.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"help"},[a("div",{on:{click:e.toggle}},[a("h1",{class:{active:e.showHint}},[e._v("사용법")])]),a("transition",{attrs:{name:"bounce"}},[e.showHint?a("div",{staticClass:"help-text"},[a("p",[e._v("1. 타일이 최대 높이를 넘으면 게임이 종료됩니다.")]),a("p",[e._v(" 2. 타일을 선택하면 선택된 타일과 인접한 같은 색의 타일이 지워지고 타일이 아래에서 올라옵니다. ")]),a("p",[e._v("3. 이름을 입력하면 이름으로 점수가 등록됩니다.")])]):e._e()])],1)}),[],!1,null,"380e43d9",null).exports}}),L=(a("21bb"),Object(o.a)(A,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home"},[t("Help"),t("Poptile"),t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:"/rank"}},[this._v("RANK")])],1)],1)}),[],!1,null,null,null).exports);i.default.use(s.a);var N=[{path:"/static/index.html",name:"Home",component:L},{path:"/",name:"Home",component:L},{path:"/rank",name:"RankPage",component:function(){return a.e("about").then(a.bind(null,"17f1"))}}],B=new s.a({mode:"history",base:"",routes:N}),T=a("a7fe"),G=a.n(T),$=a("5f5b"),I=a("b1e0");a("f9e3"),a("2dd8"),i.default.use(G.a,b.a),i.default.config.productionTip=!0,i.default.use($.a),i.default.use(I.a),new i.default({router:B,render:function(e){return e(l)}}).$mount("#app")},dd79:function(e,t,a){"use strict";var n=a("0d4c");a.n(n).a}});